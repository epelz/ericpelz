<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:none;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}</style><style data-href="/styles.3d0c5a1816b90d84609d.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.BlogIndex-iconRow{display:flex;flex-direction:row-reverse}.BlogIndex-socialIcon{box-shadow:none;text-shadow:2px 2px 3px #cdcdcd;color:#696969}.BlogIndex-socialIcon:hover{color:#4078c0}</style><meta name="generator" content="Gatsby 3.0.1"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4374dba29272687f08ad00b7ab820636" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4374dba29272687f08ad00b7ab820636"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4374dba29272687f08ad00b7ab820636"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4374dba29272687f08ad00b7ab820636"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4374dba29272687f08ad00b7ab820636"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4374dba29272687f08ad00b7ab820636"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4374dba29272687f08ad00b7ab820636"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4374dba29272687f08ad00b7ab820636"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4374dba29272687f08ad00b7ab820636"/><title data-react-helmet="true">Designing Simpler React Components | Eric Pelz</title><meta data-react-helmet="true" name="description" content="Patterns learned from porting the Asana application to React"/><meta data-react-helmet="true" property="og:title" content="Designing Simpler React Components"/><meta data-react-helmet="true" property="og:description" content="Patterns learned from porting the Asana application to React"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Eric Pelz"/><meta data-react-helmet="true" name="twitter:title" content="Designing Simpler React Components"/><meta data-react-helmet="true" name="twitter:description" content="Patterns learned from porting the Asana application to React"/><link as="script" rel="preload" href="/webpack-runtime-b3055406b05a1b1dc889.js"/><link as="script" rel="preload" href="/framework-aa628d13add4b7264db0.js"/><link as="script" rel="preload" href="/app-57ee2e4709563ec1e55d.js"/><link as="script" rel="preload" href="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-9bbeb996003fe310ed1b.js"/><link as="script" rel="preload" href="/cd7d5f864fc9e15ed8adef086269b0aeff617554-909e46d68b0400605baf.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-85f460b9db27d3c3eff9.js"/><link as="fetch" rel="preload" href="/page-data/designing-simpler-react-components/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2098522439.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:39rem;padding:2.4375rem 1.21875rem"><header><h2 style="font-size:2.2974rem;line-height:3.25rem;margin-top:0;color:#696969"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Eric Pelz</a></h2></header><main><h1>Designing Simpler React Components</h1><p style="font-size:0.8409rem;line-height:1.625rem;display:block;margin-bottom:1.625rem;margin-top:-1.08333rem">March 22, 2016<!-- --> ▪ <!-- -->12 min read</p><div><h2>Patterns learned from porting the Asana application to React</h2>
<p>When using React to build large-scale applications, a number of frameworks have
flourished to easily manage state, data-fetching, routing, and other
application-level concerns. We’re not going to talk about that — instead, we’ll
focus on another essential piece: how do you design React components for use in
a large application and have it scale?</p>
<hr>
<p>A goal to strive for when using any framework or language is
<a href="https://www.youtube.com/watch?v=rI8tNMsozo0">simplicity</a>. Over time, it is the
simpler application that is more maintainable, readable, testable, and
performant. React is no exception, and we found that one of the best ways to
manifest simplicity is by striving for
<a href="https://wiki.haskell.org/Functional_programming#Purity">functional purity</a> in
components, and by developing patterns that achieve this purity by default.
Purity leads to more isolated and inherently simpler components, thereby
bringing about a less braided and simpler system.</p>
<p>This is something we’ve thought a lot about at Asana — before we started using
React, we had been building our in-house functionally reactive framework, Luna,
since 2008. In iterating on this framework and building our web application,
we’ve learned what worked and what caused long-term problems
(<a href="https://blog.asana.com/2015/05/the-evolution-of-asanas-luna-framework/">read more</a>).
Through that, we’ve developed a series of overarching design principles that can
be applied everywhere, but particularly in React.</p>
<h3>Immutable data representation</h3>
<p>When your data representation is mutable, then you’ll find it very difficult to
maintain simple components. Individual components will become more complex by
detecting and handling the transition states when data changes, rather than
handling this at a higher-level component
<a href="https://medium.com/@learnreact/container-components-c0e67432e005#">dedicated</a>
to re-fetching the data. Additionally, in React, immutable structures often lead
to better performance: when data changes in a mutable representation, you’ll
likely need to rely on React’s virtual DOM to determine whether components
should update; alternatively, in an immutable representation, you can use a
basic strict equality check to determine whether an update should occur.</p>
<p>Any time we have deviated from this and used a mutable object in props, it has
resulted in regret and refactoring.</p>
<p>See <a href="http://jlongster.com/Using-Immutable-Data-Structures-in-JavaScript">here</a>
for more general benefits of using immutable data structures.</p>
<h3>Make liberal use of pure functions</h3>
<p>A <a href="https://en.wikipedia.org/wiki/Pure_function">pure function</a> is a function
whose return value is solely determined by its input values, without dependence
on global state or causing any side effects. In components, we often have
complicated behavior that aids but is not directly tied to our rendering. Use
pure helper functions to movethis logic outside of the component, so that the
component has fewer responsibilities and lower complexity. Additionally, this
logic can be tested in an isolated way, and is re-usable in other components. If
you notice common sets of these helper functions, then denote them as such by
organizing them into sets of modules.</p>
<p>We’ve encountered two main classes of these which occur in almost all of our
components:</p>
<ol>
<li>Data model helpers to derive a result from one or more objects<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup></li>
<li>Mutation helpers to perform client- and server-side mutations in response to
user actions<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup></li>
</ol>
<!-- prettier-ignore-start -->
<!-- prettier-ignore-end-->
<h3>Use pure components, avoiding impure pitfalls</h3>
<p>A pure component is a React component whose render function is pure (solely
determined by props and state). The default behavior in React is to always
re-render the entire component tree, even if props/state do not change. This is
incredibly inefficient, and React
<a href="https://facebook.github.io/react/docs/pure-render-mixin.html">suggests</a>
overriding shouldComponentUpdate to take advantage of pure render functions in
the component’s lifecycle. This offers an enormous performance boost and
increased simplicity, so you should consider doing this early-on.</p>
<p>When using pure components (overriding shouldComponentUpdate), there is no
verification that you actually implement your components to be pure. So, it’s
possible to accidentally write a component that is not pure, which will cause
reactivity problems and show stale data to the user. We’ll discuss two of these
“impure pitfalls.”</p>
<h4>Globals</h4>
<p>Using globals in a component means that the component is no longer pure, as it
depends on data outside of props and state. If you rely on a global for
rendering or in any of the component’s lifecycle methods, then you won’t achieve
correctness and reactivity. We’ve found it immensely helpful to avoid using
globals like the Document or Window, and instead pass these as props to the
components which use them. We do this by creating a Services object, and by
having each component declare in an interface which services it relies on.
Through this, components can maintain purity and be independent of the global
namespace.</p>
<h4>Render Callbacks</h4>
<p>A now-antipattern that used to be quite prevalent for us is a <em>render callback:</em>
a function passed as a prop to a component, which allows that component to
render something. A common use-case of a render callback was to allow a child to
render something using data it did not receive in props. For example, if we
wanted to have a generalized component that could render many types of child
components, we would pass the component a callback to render the child.</p>
<p>Unfortunately, render callbacks are inherently impure because they can use
whatever variables its function has closed on. So, because of our assumption of
pure components, if any of the outside environment changes then our component
would <em>not</em> re-render.</p>
<p>Let’s see this in a code snippet.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token comment">// Render callback anti-pattern</span>
<span class="token keyword">interface</span> <span class="token class-name">ParentProps</span> <span class="token punctuation">{</span>
  someObject<span class="token operator">:</span> SomeObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ParentComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ParentProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>ChildComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      renderSomething<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_renderSomethingForIdx<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token function">_renderSomethingForIdx</span><span class="token punctuation">(</span>idx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>SomeOtherComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      object<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span>
      idx<span class="token operator">:</span> idx<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ChildProps</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">renderSomething</span><span class="token operator">:</span> <span class="token punctuation">(</span>idx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> React<span class="token punctuation">.</span>ReactElement<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ChildComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ChildProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... some other behavior ...</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">renderSomething</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In this snippet, ParentComponent passes a render callback to ChildComponent, and
that render callback uses someObject from props. Since ChildComponent uses this
function for its rendering behavior, then it will <em>not</em> re-render if someObject
changes.</p>
<p>Luckily, you can avoid using a render callback in one of three ways, depending
on your constraints, and each allows us to keep our pure component assumption.</p>
<h5>Alternative 1</h5>
<p>Pass all information needed for rendering to the child component, and have that
child render the component directly.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">ParentProps</span> <span class="token punctuation">{</span>
  someObject<span class="token operator">:</span> SomeObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ParentComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ParentProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>ChildComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      someObject<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ChildProps</span> <span class="token punctuation">{</span>
  idx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  someObject<span class="token operator">:</span> SomeObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ChildComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ChildProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... some other behavior ...</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>SomeOtherComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      object<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span>
      idx<span class="token operator">:</span> idx<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We achieve the same rendered output by having ChildComponent render
SomeOtherComponent itself. This works well if the additional props do not cause
excess re-rendering, and do not break any contextual abstraction boundary in the
component.</p>
<h5>Alternative 2</h5>
<p>Render the component in its entirety and pass that to the child component</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">ParentProps</span> <span class="token punctuation">{</span>
  someObject<span class="token operator">:</span> SomeObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ParentComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ParentProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>ChildComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      somethingElement<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_renderSomethingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token function">_renderSomethingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>SomeOtherComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      object<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span>
      idx<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token comment">// Suppose this had access to the idx</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ChildProps</span> <span class="token punctuation">{</span>
  somethingElement<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactElement<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ChildComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ChildProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... some other behavior ...</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>somethingElement<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In cases that ParentComponent has all of the information needed to render
SomeOtherComponent, we can just pass it down as a prop to the ChildComponent.</p>
<h5>Alternative 3</h5>
<p>Render the component partially, pass the ReactElement to the child component,
and use React’s cloneElement to inject the remaining props.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">ParentProps</span> <span class="token punctuation">{</span>
  someObject<span class="token operator">:</span> SomeObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ParentComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ParentProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>ChildComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      somethingElement<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_renderSomethingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token function">_renderSomethingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>SomeOtherComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      object<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span>
      idx<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// injected by ChildComponent</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ChildProps</span> <span class="token punctuation">{</span>
  somethingElement<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactElement<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ChildComponent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>ChildProps<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... some other behavior ...</span>

    <span class="token comment">// Clone the passed-in element, and add in the remaining prop.</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>somethingElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      idx<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This alternative is great for cases where neither ParentComponent nor
ChildComponent have the full information needed to render SomeOtherComponent, so
it shares the responsibility. While this may seem more complicated than the
above two alternatives, it has a lot of desirable properties. In the next
section, we’ll dig into a real world example to make it more concrete.</p>
<h3>Divide components and use the injector pattern to maintain separation of concerns</h3>
<p>Composition is an immensely useful pattern in React for achieving separation of
concerns. Many great philosophies around this have developed, such as dividing
components between
<a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.yzeg1rmzv">presentational and container components</a>.
However, for some high-level components, such as a general component for
drag-and-drop, composition necessitated either use of a *render callback *or
added complexity. In such cases, we found the aforementioned <strong>injector
pattern</strong> helpful.</p>
<hr>
<p><strong>Example from Asana:</strong> Simplifying the Task List row</p>
<p>A core component in Asana is the Task List, which allows a user to see all of
the tasks in a project. The component for a single row in this list has many
responsibilities: it displays information (such as the task assignee), it can be
a section or a task, and it can be dragged and dropped to re-order. Following
the principle of composition, we divided the task row to achieve smaller and
simpler components, and composed them together.</p>
<p>As part of this, we wanted to create a general component that handled all of the
drag-and-drop logic, which could be composed with a task row. This would mean
that a task row could be completely agnostic to drag-and-drop, and all of that
logic would be contained within a new component that could be agnostic to its
rendered child.</p>
<p>With such a design, we would be able to compose a DraggableRowContainer and
TaskRow to make a draggable task row. Each of these two components would not
need to know about the other, and a TaskList component could utilize them to
render its task list. For example:</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">TaskList</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent<span class="token operator">&lt;</span>Props<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> DraggableRowContainer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        child<span class="token operator">:</span> TaskRow<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          task<span class="token operator">:</span> task
          <span class="token operator">...</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>However, we found this difficult to accomplish without introducing a *render
callback *or complicating the DOM hierarchy, because the DraggableRowContainer
needed to add to DOM nodes (in this case, adding class names). A solution could
have been to use a <em>render callback</em>, but that broke our purity assumption.</p>
<p>Instead, we were able to use the injector pattern. DraggableRowContainer would
clone its child (a TaskRow), and “inject” props to the child to enable
drag-and-drop. This did not introduce complexity to TaskRow: it could still
render purely based on props, and did not need to be conscious of drag
functionality. The TaskRow props would just need to adhere to a certain
interface (in this case, expecting a class name to add styling on drag hover).
Therefore, our task row has fewer responsibilities, we have a re-usable
DraggableRowContainer component, and our DOM hierarchy is unchanged.</p>
<hr>
<p>The injection pattern has proved useful in our application, particularly when
used to create general abstraction components (drag-and-drop, loading data, and
so on). TypeScript gives us compile-time assurance that the passed-in element
can indeed be injected with a given property, and the cloned element can execute
its React lifecycle methods without worry.</p>
<h3>Conclusion</h3>
<p>While this is just a short list of patterns to consider, and they will certainly
not guarantee a simple and scalable application, we have found them immensely
helpful in approaching component design. Incorporating functional purity in
every component — through use of immutable data representations, pure functions,
pure components, and eliminating impure pitfalls—has allowed us to develop large
parts of our application in React while maintaining simplicity and performance.
In all, though, the best principle is to continue to take time to reflect along
the way and uncover new opportunities to simplify.</p>
<hr>
<p><em>Thanks to Kevin Der, Josh Smith, and Phips Peter for their great work in
contributing to these patterns.</em></p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>  Example of a data model helper: determine whether a user is currently on
vacation.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isOnVacation</span><span class="token punctuation">(</span>attr<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// We pass in the current time, because otherwise this function would rely</span>
  <span class="token comment">// on the Date global. Instead, the calling component will use a chronometer</span>
  <span class="token comment">// service which is declaratively passed-in to it.</span>
  nowTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// We take advantage of TypeScript's structural typing, so this method can</span>
  <span class="token comment">// take any compatible User model. This is preferable to relying on a specific</span>
  <span class="token comment">// User interface: each calling component has a subset of the User object graph</span>
  <span class="token comment">// that it depends on, so this makes isOnVacation usable in many components.</span>
  user<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">vacationStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">vacationEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> startTime <span class="token operator">=</span> attr<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">vacationStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> endTime <span class="token operator">=</span> attr<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">vacationEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> wasOnVacation <span class="token operator">=</span> startTime <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> startTime <span class="token operator">&lt;=</span> attr<span class="token punctuation">.</span>nowTime<span class="token punctuation">;</span>
  <span class="token keyword">var</span> stillOnVacation <span class="token operator">=</span> endTime <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> endTime <span class="token operator">>=</span> attr<span class="token punctuation">.</span>nowTime<span class="token punctuation">;</span>

  <span class="token keyword">return</span> wasOnVacation <span class="token operator">&amp;&amp;</span> stillOnVacation<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
<li id="fn-2">
<p>Example of a mutation helper: to “heart” a task</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">heartTask</span><span class="token punctuation">(</span>attr<span class="token operator">:</span> <span class="token punctuation">{</span>
  datastore<span class="token operator">:</span> DatastoreService<span class="token punctuation">;</span>
  <span class="token comment">// Thin interfaces for the User/Task model which utilize TypeScript's</span>
  <span class="token comment">// structural typing, but the type aliases are omitted for brevity.</span>
  user<span class="token operator">:</span> UserBase<span class="token punctuation">;</span>
  task<span class="token operator">:</span> TaskBase<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  attr<span class="token punctuation">.</span>datastore<span class="token punctuation">.</span><span class="token function">runInBatch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. Optimistically create the object representing the heart.</span>
    <span class="token keyword">var</span> heartRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeartCreateRequest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      target<span class="token operator">:</span> attr<span class="token punctuation">.</span>task<span class="token punctuation">.</span><span class="token function">dbObjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      user<span class="token operator">:</span> attr<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">dbObjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> heartId <span class="token operator">=</span> attr<span class="token punctuation">.</span>datastore<span class="token punctuation">.</span><span class="token function">createDbObject</span><span class="token punctuation">(</span>heartRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Send server request to update the database.</span>
    attr<span class="token punctuation">.</span>services<span class="token punctuation">.</span>datastore<span class="token punctuation">.</span><span class="token function">requestServerChange</span><span class="token punctuation">(</span>
      “post”<span class="token punctuation">,</span> “<span class="token operator">/</span>task_heart”<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// server will create an identical object with the same ID.</span>
        global_id<span class="token operator">:</span> heartId<span class="token punctuation">,</span>
        task<span class="token operator">:</span> task<span class="token punctuation">.</span><span class="token function">dbObjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        user<span class="token operator">:</span> attr<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">dbObjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<a href="#fnref-2" class="footnote-backref">↩</a>
</li>
</ol>
</div></div><hr style="margin-bottom:1.625rem"/><div style="display:flex"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.8125rem;margin-bottom:0;min-width:50px;border-radius:100%"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQCAwX/xAAXAQEBAQEAAAAAAAAAAAAAAAADAgAB/9oADAMBAAIQAxAAAAGjjXwJNq3N42R4sA3/AP/EABsQAQEBAAIDAAAAAAAAAAAAAAECAAMREhMy/9oACAEBAAEFAqeg9ku5PmAa8da6acKn/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAQ/9oACAEDAQE/AXS//8QAGREAAgMBAAAAAAAAAAAAAAAAAAECECER/9oACAECAQE/AYrDlNaf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQITEy/9oACAEBAAY/Asstpo5hKjJ1n//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExkUFxgf/aAAgBAQABPyFPkTQvfEVPLuEbNZsEmmWist8RT63IQepn/9oADAMBAAIAAwAAABAv2AL/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QVsrJy//EABgRAQADAQAAAAAAAAAAAAAAAAEAEBEh/9oACAECAQE/EA1QAha5P//EABwQAQEBAQACAwAAAAAAAAAAAAERACExQVFhcf/aAAgBAQABPxDxdTF8C+8xOQIgx4JzmemlzI6X9wyLoT67q57kCmDlCAROuSgM+Df/2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/4374dba29272687f08ad00b7ab820636/99438/ericpelz.jpg 1x,
/static/4374dba29272687f08ad00b7ab820636/aba1d/ericpelz.jpg 1.5x,
/static/4374dba29272687f08ad00b7ab820636/b315d/ericpelz.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/static/4374dba29272687f08ad00b7ab820636/99438/ericpelz.jpg 1x,
/static/4374dba29272687f08ad00b7ab820636/aba1d/ericpelz.jpg 1.5x,
/static/4374dba29272687f08ad00b7ab820636/b315d/ericpelz.jpg 2x" src="/static/4374dba29272687f08ad00b7ab820636/99438/ericpelz.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>I&#x27;m a software engineer at<!-- --> <a href="https://www.asana.com/">Asana</a>. I&#x27;m the tech lead of the Workflow Pillar, which includes the Automation, Communications, App Experience, Integrations, and API product teams. I used to be a people manager, and might manage again in the future. I spend a lot of time thinking about running effective teams, fostering growth, product+engineering collaboration, and engineering design patterns.</p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0;margin-top:3.25rem"><li></li><li><a rel="next" href="/propel-new-engineers-code-review/">How to propel new engineers with code review<!-- --> →</a></li></ul></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-11821661-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/designing-simpler-react-components/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6f08a764053358e88a06.js"],"app":["/app-57ee2e4709563ec1e55d.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-7a4b0ab385bd7f980dc7.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5becf45aba232c1daa92.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4b27868d91ceab067124.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-85f460b9db27d3c3eff9.js"]};/*]]>*/</script><script src="/polyfill-6f08a764053358e88a06.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-85f460b9db27d3c3eff9.js" async=""></script><script src="/cd7d5f864fc9e15ed8adef086269b0aeff617554-909e46d68b0400605baf.js" async=""></script><script src="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-9bbeb996003fe310ed1b.js" async=""></script><script src="/app-57ee2e4709563ec1e55d.js" async=""></script><script src="/framework-aa628d13add4b7264db0.js" async=""></script><script src="/webpack-runtime-b3055406b05a1b1dc889.js" async=""></script></body></html>